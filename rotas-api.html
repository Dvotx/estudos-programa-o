<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rotas & API REST</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body class="guia">
    <div class="guia-container">
        <h1>‚¨å Rotas & API REST</h1>

        <div class="guia-intro">
            <p><strong>Rotas</strong> s√£o caminhos do seu servidor. <strong>API</strong> √© um jeito de outras aplica√ß√µes pegarem dados do seu servidor.</p>
        </div>

        <section class="exemplo-guia">
            <h2>O que √© uma Rota?</h2>
            <div class="explanation">
                <p>Uma rota √© um caminho no seu servidor:</p>
                <ul>
                    <li>http://localhost:3000/ ‚Üí P√°gina inicial</li>
                    <li>http://localhost:3000/usuarios ‚Üí Lista de usu√°rios</li>
                    <li>http://localhost:3000/produto/123 ‚Üí Um produto espec√≠fico</li>
                </ul>
            </div>
        </section>

        <section class="exemplo-guia">
            <h2>Exemplo: URLs que buscam dados</h2>
            <div class="explanation">
                <p>Voc√™ pode ter rotas que trazem dados diferentes:</p>
            </div>
            <div class="codigo-exemplo">
                <pre>// GET = Pedir dados
app.get('/usuarios', (req, res) => {
    res.json(['Jo√£o', 'Maria', 'Pedro']);
});

app.get('/produtos', (req, res) => {
    res.json([
        { id: 1, nome: 'Notebook', preco: 3000 },
        { id: 2, nome: 'Mouse', preco: 50 }
    ]);
});</pre>
            </div>
        </section>

        <section class="exemplo-guia">
            <h2>Exemplo: Pegar um item espec√≠fico</h2>
            <div class="explanation">
                <p>Use <code>:id</code> para ter um n√∫mero na URL:</p>
            </div>
            <div class="codigo-exemplo">
                <pre>// http://localhost:3000/usuarios/1
app.get('/usuarios/:id', (req, res) => {
    const id = req.params.id;
    res.json({ id: id, nome: 'Jo√£o' });
});</pre>
            </div>
            <div class="explanation">
                <p><code>req.params.id</code> = o n√∫mero que vem na URL</p>
            </div>
        </section>

        <section class="exemplo-guia">
            <h2>Exemplo: Rotas que criam, atualizam e deletam</h2>
            <div class="explanation">
                <p>Diferentes tipos de pedidos fazem coisas diferentes:</p>
            </div>
            <div class="codigo-exemplo">
                <pre>// GET = Buscar dados
app.get('/usuarios', (req, res) => {
    res.json({ usuarios: ['Jo√£o', 'Maria'] });
});

// POST = Criar algo novo
app.post('/usuarios', (req, res) => {
    res.status(201).json({ msg: 'Usu√°rio criado!' });
});

// PUT = Atualizar um usu√°rio
app.put('/usuarios/:id', (req, res) => {
    res.json({ msg: 'Usu√°rio atualizado!' });
});

// DELETE = Apagar um usu√°rio
app.delete('/usuarios/:id', (req, res) => {
    res.json({ msg: 'Usu√°rio apagado!' });
});</pre>
            </div>
        </section>

        <section class="exemplo-guia">
            <h2>Minha nota: Uma API completa de exemplo</h2>
            <div class="explanation">
                <p>Vamos fazer uma API de produtos bem simples:</p>
            </div>
            <div class="codigo-exemplo">
                <pre>const express = require('express');
const app = express();
app.use(express.json());

let produtos = [
    { id: 1, nome: 'Notebook', preco: 3000 },
    { id: 2, nome: 'Mouse', preco: 50 }
];

// Listar todos
app.get('/produtos', (req, res) => {
    res.json(produtos);
});

// Pegar um espec√≠fico
app.get('/produtos/:id', (req, res) => {
    const produto = produtos.find(p => p.id == req.params.id);
    res.json(produto);
});

app.listen(3000);</pre>
            </div>
        </section>

        <section class="exemplo-guia">
            <h2>Minha nota: Buscar com par√¢metros</h2>
            <div class="explanation">
                <p>Voc√™ pode usar <code>?</code> na URL para enviar informa√ß√µes extras:</p>
            </div>
            <div class="codigo-exemplo">
                <pre>// http://localhost:3000/buscar?q=notebook&preco=3000
app.get('/buscar', (req, res) => {
    const termo = req.query.q;
    const preco = req.query.preco;
    res.json({ termo: termo, preco: preco });
});</pre>
            </div>
            <div class="explanation">
                <p><code>req.query</code> = os par√¢metros que v√™m depois do <code>?</code></p>
            </div>
        </section>

        <section class="exemplo-guia" style="background-color: #fffbea; border-left: 4px solid #f39c12;">
            <h2>‚úèÔ∏è Pratique agora!</h2>
            <div class="explanation">
                <p><strong>Exerc√≠cio:</strong> Crie 3 rotas no seu servidor:</p>
                <ul>
                    <li>GET /ola que retorna "Ol√°!"</li>
                    <li>GET /nome que retorna seu nome</li>
                    <li>GET /idade que retorna sua idade</li>
                </ul>
                <p>üí° Dica: Teste cada rota no navegador!</p>
            </div>
        </section>

        <div style="margin-top: 40px; text-align: center;">
            <a href="express-basico.html" class="btn-caixa">‚Üê Anterior: Express</a>
            <a href="menu-backend.html" class="btn-caixa">Menu</a>
            <a href="middleware.html" class="btn-caixa">Pr√≥ximo: Middleware ‚Üí</a>
        </div>
    </div>
</body>
</html>

// PUT - Atualizar
app.put('/api/produtos/:id', (req, res) => {
    const produto = produtos.find(p => p.id == req.params.id);
    
    if (!produto) {
        return res.status(404).json({ erro: 'Produto n√£o encontrado' });
    }
    
    if (req.body.nome) produto.nome = req.body.nome;
    if (req.body.preco) produto.preco = req.body.preco;
    
    res.json(produto);
});

// DELETE - Remover
app.delete('/api/produtos/:id', (req, res) => {
    const index = produtos.findIndex(p => p.id == req.params.id);
    
    if (index === -1) {
        return res.status(404).json({ erro: 'Produto n√£o encontrado' });
    }
    
    const removido = produtos.splice(index, 1);
    res.json(removido[0]);
});

app.listen(3000, () => {
    console.log('API rodando em http://localhost:3000');
});</pre>
            </div>

